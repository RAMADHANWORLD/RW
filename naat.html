<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Naat Collection - Ramadhan World</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Listen to a beautiful collection of Naats praising the Prophet Muhammad Ô∑∫.">
    <link rel="canonical" href="https://www.ramadhanworld.com/naat.html">
    <!-- Common Head Content (CSS, Fonts, etc.) -->
    <link rel="icon" href="https://i.ibb.co/Zp0bgjsS/ART-WORKS-1.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Amiri:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
    body{font-family:'Cairo','Inter',sans-serif;background:linear-gradient(to bottom,#0a192f,#113a3b);color:#e6f1ff}
    .card{background-color:rgba(10,25,47,.85);backdrop-filter:blur(10px);border:1px solid rgba(57,255,20,.2);box-shadow:0 8px 32px 0 rgba(0,0,0,.37);border-radius:.75rem}
    .nav-button.active{background-color:#39FF14;color:#0a192f;font-weight:700;box-shadow:0 4px 14px rgba(57,255,20,.4)}
    .nav-button:hover{background-color:rgba(57,255,20,.8);color:#000}
    .video-container{position:relative;width:100%;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:.75rem;max-width:960px;margin:auto}
    .video-container iframe{position:absolute;top:0;left:0;width:100%;height:100%}
    .ad-container-bottom{margin-top:1.5rem;padding-top:1.5rem;border-top:1px dashed rgba(57,255,20,.3);text-align:center}
    /* Style for the fallback message */
    .youtube-fallback {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        width: 100%;
        background-color: #333;
        color: #eee;
        font-size: 1.2rem;
        text-align: center;
        padding: 20px;
        box-sizing: border-box;
    }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <div id="loading-screen" class="fixed inset-0 bg-gray-900 flex flex-col justify-center items-center z-50 transition-opacity duration-300">
        <h1 class="text-4xl sm:text-5xl font-extrabold" style="color: #39FF14;">RAMADHAN WORLD</h1>
    </div>

    <div id="main-content" class="min-h-screen container mx-auto p-4 sm:p-6 lg:p-8 opacity-0 transition-opacity duration-1000">
        <!-- Header Section -->
        <header class="text-center mb-6">
            <img id="app-logo" src="https://i.ibb.co/Zp0bgjsS/ART-WORKS-1.png" alt="Ramadhan World App Logo" class="w-[200px] h-[200px] mx-auto mb-4 rounded-full shadow-lg object-contain" loading="lazy" decoding="async">
            <h1 class="text-4xl sm:text-5xl font-extrabold" style="color: #39FF14;">Ramadhan World</h1>
            <p id="islamic-date" class="text-lg text-gray-300 mt-2">Loading Islamic Date...</p>
            <p id="location" class="text-md text-gray-400 mt-1">Fetching location...</p>
        </header>

        <!-- Navigation -->
        <nav class="flex justify-center gap-2 mb-6 flex-wrap items-center">
            <a href="index.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üè† Home</a>
            <a href="salah.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üïå Salah</a>
            <a href="quran.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üìñ Quran</a>
            <a href="radio.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üìª Radio</a>
            <a href="ask.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üí¨ Ask Islam</a>
            <a href="tasbeeh.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üìø Tasbeeh</a>
            <a href="hadith.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üìú Hadith</a>
            <a href="naat.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üéµ Naat</a>
            <a href="qibla.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üß≠ Qibla</a>
            <a href="calendar.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üóìÔ∏è Calendar</a>
            <a href="settings.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">‚öôÔ∏è Settings</a>
        </nav>

        <!-- Main Content -->
        <main>
             <div class="card p-6 mx-auto text-center">
                <h2 class="text-2xl font-semibold mb-4">Naat Collection</h2>
                <div class="video-container mb-4">
                    <div id="youtube-player">
                        <!-- Fallback message if YouTube player doesn't load -->
                        <div class="youtube-fallback">
                            <p>YouTube player could not load. Please check your browser console for errors, especially Content Security Policy (CSP) issues.</p>
                        </div>
                    </div>
                </div>
                <div class="flex justify-center gap-4 flex-wrap">
                    <button onclick="previousVideo()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full text-lg"><i class="fas fa-backward"></i></button>
                    <button id="tv-play-button" onclick="playVideo()" class="text-black font-bold py-2 px-4 rounded-full text-lg" style="background-color: #39FF14;"><i class="fas fa-play"></i></button>
                    <button id="tv-pause-button" onclick="pauseVideo()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full text-lg hidden"><i class="fas fa-pause"></i></button>
                    <button onclick="nextVideo()" class="bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded-full text-lg"><i class="fas fa-forward"></i></button>
                </div>
                 <!-- Ad Unit -->
                <div class="ad-container-bottom">
                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8794459819365243" crossorigin="anonymous"></script>
                    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8794459819365243" data-ad-slot="1234567890" data-ad-format="auto" data-full-width-responsive="true"></ins>
                    <!-- The adsbygoogle.push({}); call is now handled in JavaScript after the main content is visible -->
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="text-center p-4 text-sm text-gray-600 space-x-4 mt-8">
          <a href="about.html" class="text-blue-600 underline">About</a>
          <a href="privacy.html" class="text-blue-600 underline">Privacy Policy</a>
          <a href="contact.html" class="text-blue-600 underline">Contact</a>
        </footer>
    </div>
    
    <!-- YouTube Iframe API script -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        const loadingScreen=document.getElementById("loading-screen"),mainContent=document.getElementById("main-content"),islamicDateEl=document.getElementById("islamic-date"),locationEl=document.getElementById("location"),tvPlayButton=document.getElementById("tv-play-button"),tvPauseButton=document.getElementById("tv-pause-button");
        let youtubePlayer;

        // Function called when the YouTube Iframe API is ready
        function onYouTubeIframeAPIReady() {
            console.log("onYouTubeIframeAPIReady fired!"); // Log to confirm this function is called
            const playerElement = document.getElementById('youtube-player');
            if (!playerElement) {
                console.error("YouTube player element not found!"); // Log if element is missing
                return;
            }
            
            // Remove the fallback message if the player is about to be initialized
            const fallbackMessage = playerElement.querySelector('.youtube-fallback');
            if (fallbackMessage) {
                fallbackMessage.remove();
            }

            youtubePlayer = new YT.Player(playerElement, {
                height: "480",
                width: "854",
                playerVars: {
                    playsinline: 1,
                    listType: "playlist",
                    list: "PL6b_3Yr67_wFpDJfaZLlMEUP6h5EroJi2", // Your YouTube playlist ID
                    controls: 0,
                    rel: 0
                },
                events: {
                    onStateChange: onPlayerStateChange,
                    onError: onPlayerError // Add an error handler for the player
                }
            });
            console.log("YouTube Player initialized."); // Log successful initialization
        }

        function onPlayerStateChange(a) {
            if (tvPlayButton) tvPlayButton.classList.toggle("hidden", a.data === YT.PlayerState.PLAYING);
            if (tvPauseButton) tvPauseButton.classList.toggle("hidden", a.data !== YT.PlayerState.PLAYING);
        }

        // New error handler for YouTube player
        function onPlayerError(event) {
            console.error("YouTube Player Error:", event.data);
            // You could display a more user-friendly message here if needed
            const playerElement = document.getElementById('youtube-player');
            if (playerElement) {
                playerElement.innerHTML = `<div class="youtube-fallback">
                    <p>Error loading YouTube video. Code: ${event.data}. This might be due to content restrictions or network issues.</p>
                </div>`;
            }
        }

        function playVideo() { youtubePlayer.playVideo(); }
        function pauseVideo() { youtubePlayer.pauseVideo(); }
        function nextVideo() { youtubePlayer.nextVideo(); }
        function previousVideo() { youtubePlayer.previousVideo(); }

        // Initial app setup and data fetching
        function initializeAppFast() {
            hideLoading();
            async function fetchInitialData() { await getUserLocation(); }
            fetchInitialData();
        }

        function hideLoading() {
            loadingScreen.style.opacity = "0";
            setTimeout(() => {
                loadingScreen.style.display = "none";
                mainContent.style.opacity = 1;
                // Initialize AdSense after main content is visible and rendered
                if (window.adsbygoogle && mainContent.style.opacity === "1") {
                    console.log("Pushing AdSense ad after main content is visible.");
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
            }, 300);
        }

        async function getUserLocation() {
            return new Promise(a => {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(async e => {
                        try {
                            const t = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e.coords.latitude}&lon=${e.coords.longitude}`);
                            const n = await t.json();
                            if (islamicDateEl) getPrayerTimes(n.address.city || n.address.town, n.address.country);
                        } catch (e) {
                            console.error("Error fetching location or prayer times:", e);
                        }
                        a();
                    }, async () => {
                        console.warn("Geolocation permission denied or error.");
                        a();
                    });
                } else {
                    console.warn("Geolocation not supported by this browser.");
                    a();
                }
            });
        }

        async function getPrayerTimes(a, e) {
            try {
                const t = new Date();
                const n = `${t.getDate()}-${t.getMonth() + 1}-${t.getFullYear()}`;
                const o = `https://api.aladhan.com/v1/timingsByCity/${n}?city=${a}&country=${e}&method=2`;
                const r = await fetch(o);
                const d = await r.json();
                if (200 === d.code && islamicDateEl) {
                    islamicDateEl.textContent = `${d.data.date.hijri.weekday.en}, ${d.data.date.hijri.day} ${d.data.date.hijri.month.en} ${d.data.date.hijri.year}`;
                } else {
                    console.error("Failed to fetch prayer times:", d.data.status);
                }
            } catch (a) {
                console.error("Error fetching prayer times:", a);
            }
        }
        
        document.addEventListener("DOMContentLoaded", initializeAppFast);
    </script>
    <script>
    // Navigation Handler
    document.addEventListener("DOMContentLoaded", function() {
        const navButtons = document.querySelectorAll('nav .nav-button');
        const currentPage = window.location.pathname.split('/').pop() || 'index.html';
        navButtons.forEach(button => {
            const buttonPage = button.getAttribute('href');
            if (buttonPage === currentPage) {
                button.classList.add('active');
            }
        });
    });
    </script>
</body>
</html>
