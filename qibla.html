<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Qibla Direction - Ramadhan World</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Find the Qibla direction with our easy-to-use compass. Accurate Qibla finder for your location.">
    <link rel="canonical" href="https://www.ramadhanworld.com/qibla.html">
    <!-- Common Head Content (CSS, Fonts, etc.) -->
    <link rel="icon" href="https://i.ibb.co/Zp0bgjsS/ART-WORKS-1.png" type="image/png">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&family=Amiri:wght@400;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
    body{font-family:'Cairo','Inter',sans-serif;background:linear-gradient(to bottom,#0a192f,#113a3b);color:#e6f1ff}
    .card{background-color:rgba(10,25,47,.85);backdrop-filter:blur(10px);border:1px solid rgba(57,255,20,.2);box-shadow:0 8px 32px 0 rgba(0,0,0,.37);border-radius:.75rem}
    .nav-button.active{background-color:#39FF14;color:#0a192f;font-weight:700;box-shadow:0 4px 14px rgba(57,255,20,.4)}
    .nav-button:hover{background-color:rgba(57,255,20,.8);color:#000}
    #compass{position:relative;width:256px;height:256px;background-color:#1f2937;border-radius:9999px;border:4px solid #374151;display:flex;align-items:center;justify-content:center;margin:2rem auto;transition:transform .2s linear}
    .direction{position:absolute;font-weight:700;color:#9ca3af}
    .direction.north{top:10px;font-size:1.5rem;color:#ef4444}
    .direction.south{bottom:10px}
    .direction.east{right:10px}
    .direction.west{left:10px}
    #qibla-line{transform-origin:bottom center;position:absolute;width:4px;height:100px;top:28px;left:50%;transform:translateX(-50%)}
    #qibla-line div{width:100%;height:100%;background-color:#39FF14;box-shadow:0 0 10px rgba(57,255,20,0.7);border-radius:2px}
    .ad-container-bottom{margin-top:1.5rem;padding-top:1.5rem;border-top:1px dashed rgba(57,255,20,.3);text-align:center}
    </style>
</head>
<body class="bg-gray-900 text-white">

    <div id="loading-screen" class="fixed inset-0 bg-gray-900 flex flex-col justify-center items-center z-50 transition-opacity duration-300">
        <h1 class="text-4xl sm:text-5xl font-extrabold" style="color: #39FF14;">RAMADHAN WORLD</h1>
    </div>

    <div id="main-content" class="min-h-screen container mx-auto p-4 sm:p-6 lg:p-8 opacity-0 transition-opacity duration-1000">
        <!-- Header Section -->
        <header class="text-center mb-6">
            <img id="app-logo" src="https://i.ibb.co/Zp0bgjsS/ART-WORKS-1.png" alt="Ramadhan World App Logo" class="w-[200px] h-[200px] mx-auto mb-4 rounded-full shadow-lg object-contain" loading="lazy" decoding="async">
            <h1 class="text-4xl sm:text-5xl font-extrabold" style="color: #39FF14;">Ramadhan World</h1>
            <p id="islamic-date" class="text-lg text-gray-300 mt-2">Loading Islamic Date...</p>
            <p id="location" class="text-md text-gray-400 mt-1">Fetching location...</p>
        </header>

        <!-- Navigation -->
        <nav class="flex justify-center gap-2 mb-6 flex-wrap items-center">
            <a href="index.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üè† Home</a>
            <a href="salah.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üïå Salah</a>
            <a href="quran.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üìñ Quran</a>
            <a href="radio.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üìª Radio</a>
            <a href="ask.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üí¨ Ask Islam</a>
            <a href="tasbeeh.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üìø Tasbeeh</a>
            <a href="hadith.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üìú Hadith</a>
            <a href="naat.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üéµ Naat</a>
            <a href="qibla.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üß≠ Qibla</a>
            <a href="calendar.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">üóìÔ∏è Calendar</a>
            <a href="settings.html" class="nav-button px-4 py-2 rounded-lg bg-gray-700 transition">‚öôÔ∏è Settings</a>
        </nav>

        <!-- Main Content -->
        <main>
             <div class="card p-6 max-w-sm mx-auto text-center">
                <h2 class="text-2xl font-semibold mb-4">üß≠ Qibla Compass</h2>
                <div id="compass">
                    <div class="direction north">N</div>
                    <div class="direction east">E</div>
                    <div class="direction south">S</div>
                    <div class="direction west">W</div>
                    <div id="qibla-line">
                        <div></div>
                    </div>
                </div>
                 <p class="text-lg text-yellow-400 mt-4 font-bold">Advanced Qibla Compass ‚Äì Coming Soon</p>
                <p id="qibla-direction" class="mt-2 text-md text-gray-300">For accurate results, hold your device flat, away from any metals.</p>
                <p class="text-sm text-gray-400 mt-2">(Accuracy depends on your device's hardware and browser support)</p>
                 <!-- Ad Unit -->
                <div class="ad-container-bottom">
                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8794459819365243" crossorigin="anonymous"></script>
                    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-8794459819365243" data-ad-slot="1234567890" data-ad-format="auto" data-full-width-responsive="true"></ins>
                    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="text-center p-4 text-sm text-gray-600 space-x-4 mt-8">
          <a href="about.html" class="text-blue-600 underline">About</a>
          <a href="privacy.html" class="text-blue-600 underline">Privacy Policy</a>
          <a href="contact.html" class="text-blue-600 underline">Contact</a>
        </footer>
    </div>
    
    <!-- Scripts -->
    <script>
        const loadingScreen=document.getElementById("loading-screen"),mainContent=document.getElementById("main-content"),islamicDateEl=document.getElementById("islamic-date"),locationEl=document.getElementById("location"),compass=document.getElementById("compass"),qiblaLine=document.getElementById("qibla-line");
        let qiblaAngle=0;

        function initializeAppFast(){
            hideLoading();
            async function fetchInitialData() {
                await getUserLocation();
                startCompass();
            };
            fetchInitialData();
            // Cleanup compass on page leave
            window.addEventListener('beforeunload', stopCompass);
        }
        function hideLoading(){loadingScreen.style.opacity="0",setTimeout(()=>{loadingScreen.style.display="none",mainContent.style.opacity=1},300)}
        function calculateQiblaDirection(a,e){const t=21.4225,n=39.8262,o=(n-e)*Math.PI/180,r=a*Math.PI/180,d=t*Math.PI/180,i=Math.sin(o)*Math.cos(d),s=Math.cos(r)*Math.sin(d)-Math.sin(r)*Math.cos(d)*Math.cos(o);return(180*Math.atan2(i,s)/Math.PI+360)%360}
        async function getUserLocation(){return new Promise(a=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{qiblaAngle=calculateQiblaDirection(e.coords.latitude,e.coords.longitude);try{const t=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e.coords.latitude}&lon=${e.coords.longitude}`),n=await t.json();if(islamicDateEl) getPrayerTimes(n.address.city||n.address.town,n.address.country)}catch(e){}a()},async()=>{if(locationEl)locationEl.textContent="Location access is required for Qibla direction.";a()}):a()})}
        async function getPrayerTimes(a,e){try{const t=new Date,n=`${t.getDate()}-${t.getMonth()+1}-${t.getFullYear()}`,o=`https://api.aladhan.com/v1/timingsByCity/${n}?city=${a}&country=${e}&method=2`,r=await fetch(o),d=await r.json();if(200===d.code && islamicDateEl)islamicDateEl.textContent=`${d.data.date.hijri.weekday.en}, ${d.data.date.hijri.day} ${d.data.date.hijri.month.en} ${d.data.date.hijri.year}`}catch(a){console.error("Error fetching prayer times:",a)}}
        
        function startCompass(){
            if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission().then(a=>{ "granted"===a && window.addEventListener("deviceorientation", handleOrientation) }).catch(console.error);
            } else {
                window.addEventListener("deviceorientation", handleOrientation);
            }
        }
        function stopCompass(){window.removeEventListener("deviceorientation",handleOrientation)}
        function handleOrientation(a){let e=a.webkitCompassHeading||a.alpha;if(null!==e&&compass&&qiblaLine){compass.style.transform=`rotate(${-e}deg)`;qiblaLine.style.transform=`translateX(-50%) rotate(${qiblaAngle}deg)`}}
        
        document.addEventListener("DOMContentLoaded", initializeAppFast);
    </script>
    <script>
    // Navigation Handler
    document.addEventListener("DOMContentLoaded", function() {
        const navButtons = document.querySelectorAll('nav .nav-button');
        const currentPage = window.location.pathname.split('/').pop() || 'index.html';
        navButtons.forEach(button => {
            const buttonPage = button.getAttribute('href');
            if (buttonPage === currentPage) {
                button.classList.add('active');
            }
        });
    });
    </script>
</body>
</html>